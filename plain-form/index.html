<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width">
  <title></title>
</head>
<body>
  <button id="js-show-dialog" class="text-button">ダイアログを開く</button>

  <dialog id="js-dialog" class="dialog">
    <form action="dialog">
      <section>
        <label for="permission">権限設定</label>
        <select id="permission" name="permission">
          <option value="none">閲覧不可</option>
          <option value="read" selected>閲覧可</option>
          <option value="write">編集可</option>
        </select>
      </section>
      <button type="button" id="js-dialog-cancel">もどる</button>
      <button type="submit" formmethod="dialog">送信</button>
    </form>
  </dialog>

  <script>
    const showButton = document.getElementById('js-show-dialog');
    const dialogElement = document.getElementById('js-dialog');
    showButton.addEventListener('click', () => {
      dialogElement.showModal();
    });

    const cancelButton = document.getElementById("js-dialog-cancel");
    cancelButton.addEventListener('click', () => {
      dialogElement.close();
    });

    const form = dialogElement.querySelector("form");
    form.addEventListener("submit", (e) => {
      const formData = new FormData(form, e.submitter);
      alert(`送信された権限設定の値: ${formData.get("permission")}`);
    })
  </script>
</body>
</html>
